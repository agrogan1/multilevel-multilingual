[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Multilevel Multilingual",
    "section": "",
    "text": "1 Multilevel Multilingual",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Multilevel Multilingual</span>"
    ]
  },
  {
    "objectID": "index.html#introduction",
    "href": "index.html#introduction",
    "title": "Multilevel Multilingual",
    "section": "1.1 Introduction",
    "text": "1.1 Introduction\nBelow, I describe the use of Stata, R, and Julia to estimate multilevel models. Because this document is built by Quarto, I am calling these programs from within a Quarto environment. However, each piece of software could be used individually and separately.",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Multilevel Multilingual</span>"
    ]
  },
  {
    "objectID": "index.html#the-data",
    "href": "index.html#the-data",
    "title": "Multilevel Multilingual",
    "section": "1.2 The Data",
    "text": "1.2 The Data\nThe examples use the simulated_multilevel_data.dta file from Multilevel Thinking. Here is a direct link to download the data.\n\n\n\n\nTable 1.1: Sample of Simulated Multilevel Data\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\ncountry\nHDI\nfamily\nid\ngroup\nphysical_punishment\nwarmth\noutcome\n\n\n\n\n1\n69\n1\n1.1\n2\n2\n3\n59.18\n\n\n1\n69\n2\n1.2\n2\n4\n0\n61.54\n\n\n1\n69\n3\n1.3\n1\n4\n4\n51.87\n\n\n1\n69\n4\n1.4\n2\n0\n6\n51.71\n\n\n1\n69\n5\n1.5\n2\n3\n2\n55.88\n\n\n1\n69\n6\n1.6\n1\n5\n3\n60.78",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Multilevel Multilingual</span>"
    ]
  },
  {
    "objectID": "index.html#an-introduction-to-equations-and-syntax",
    "href": "index.html#an-introduction-to-equations-and-syntax",
    "title": "Multilevel Multilingual",
    "section": "1.3 An Introduction To Equations and Syntax",
    "text": "1.3 An Introduction To Equations and Syntax\nTo explain statistical syntax for each software, I consider the general case of a multilevel model with dependent variable y, independent variables x and z, clustering variable group, and a random slope for x. i is the index for the person, while j is the index for the group.\n\\[y = \\beta_0 + \\beta_1 x_{ij} + \\beta_2 z_{ij} + u_{0j} + u_{1j} \\times x_{ij} + e_{ij} \\tag{1.1}\\]\n\nStataRJulia\n\n\nIn Stata mixed, the syntax for a multilevel model of the form described in Equation 1.1 is:\n\nmixed y x || group: x\n\n\n\nIn R lme4, the general syntax for a multilevel model of the form described in Equation 1.1 is:\n\nlmer(y ~ x + z + (1 + x || group), data = ...)\n\n\n\nIn Julia MixedModels, the general syntax for a multilevel model of the form described in Equation 1.1 is:\n\nfit(MixedModel, @formula(y ~ x + z + (1 + x | group)), data)",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Multilevel Multilingual</span>"
    ]
  },
  {
    "objectID": "descriptives-multilingual.html",
    "href": "descriptives-multilingual.html",
    "title": "2  Descriptive Statitics",
    "section": "",
    "text": "2.1 Descriptive Statistics",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Descriptive Statitics</span>"
    ]
  },
  {
    "objectID": "descriptives-multilingual.html#descriptive-statistics",
    "href": "descriptives-multilingual.html#descriptive-statistics",
    "title": "2  Descriptive Statitics",
    "section": "",
    "text": "StataRJulia\n\n\n\n\nuse simulated_multilevel_data.dta // use data\n\n\n\nsummarize outcome warmth physical_punishment HDI\n\ntabulate group\n\n    Variable |        Obs        Mean    Std. dev.       Min        Max\n-------------+---------------------------------------------------------\n     outcome |      3,000    53.46757     6.65179   33.39014   76.75101\n      warmth |      3,000    3.524333    1.889956          0          7\nphysical_p~t |      3,000    2.494667    1.380075          0          5\n         HDI |      3,000    64.76667    17.24562         33         87\n\n\n  arbitrary |\n      group |\n   variable |      Freq.     Percent        Cum.\n------------+-----------------------------------\n          1 |      1,507       50.23       50.23\n          2 |      1,493       49.77      100.00\n------------+-----------------------------------\n      Total |      3,000      100.00\n\n\n\n\n\nlibrary(haven)\n\ndf &lt;- read_dta(\"simulated_multilevel_data.dta\")\n\n\ndf$country &lt;- factor(df$country)\n\ndf$group &lt;- factor(df$group)\n\nskimr::skim(df)\n\n\nData summary\n\n\nName\ndf\n\n\nNumber of rows\n3000\n\n\nNumber of columns\n8\n\n\n_______________________\n\n\n\nColumn type frequency:\n\n\n\ncharacter\n1\n\n\nfactor\n2\n\n\nnumeric\n5\n\n\n________________________\n\n\n\nGroup variables\nNone\n\n\n\nVariable type: character\n\n\n\n\n\n\n\n\n\n\n\n\n\nskim_variable\nn_missing\ncomplete_rate\nmin\nmax\nempty\nn_unique\nwhitespace\n\n\n\n\nid\n0\n1\n3\n6\n0\n3000\n0\n\n\n\nVariable type: factor\n\n\n\n\n\n\n\n\n\n\n\nskim_variable\nn_missing\ncomplete_rate\nordered\nn_unique\ntop_counts\n\n\n\n\ncountry\n0\n1\nFALSE\n30\n1: 100, 2: 100, 3: 100, 4: 100\n\n\ngroup\n0\n1\nFALSE\n2\n1: 1507, 2: 1493\n\n\n\nVariable type: numeric\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nskim_variable\nn_missing\ncomplete_rate\nmean\nsd\np0\np25\np50\np75\np100\nhist\n\n\n\n\nHDI\n0\n1\n64.77\n17.25\n33.00\n53.00\n70.00\n81.00\n87.00\n▅▂▅▇▇\n\n\nfamily\n0\n1\n50.50\n28.87\n1.00\n25.75\n50.50\n75.25\n100.00\n▇▇▇▇▇\n\n\nphysical_punishment\n0\n1\n2.49\n1.38\n0.00\n2.00\n3.00\n3.25\n5.00\n▇▇▇▆▂\n\n\nwarmth\n0\n1\n3.52\n1.89\n0.00\n2.00\n4.00\n5.00\n7.00\n▃▃▇▃▅\n\n\noutcome\n0\n1\n53.47\n6.65\n33.39\n48.78\n53.64\n58.06\n76.75\n▁▅▇▃▁\n\n\n\n\n\n\n\n\nusing Tables, MixedModels, MixedModelsExtras, StatFiles, DataFrames, CategoricalArrays, DataFramesMeta\n\ndf = DataFrame(load(\"simulated_multilevel_data.dta\"))\n\n\n@transform!(df, :country = categorical(:country))\n\n@transform!(df, :group = categorical(:group))\n\n\n\ndescribe(df)\n\n8×7 DataFrame\n Row │ variable             mean     min      median   max     nmissing  eltyp ⋯\n     │ Symbol               Union…   Any      Union…   Any     Int64     Union ⋯\n─────┼──────────────────────────────────────────────────────────────────────────\n   1 │ country                       1.0               30.0           0  Union ⋯\n   2 │ HDI                  64.7667  33.0     70.0     87.0           0  Union\n   3 │ family               50.5     1.0      50.5     100.0          0  Union\n   4 │ id                            1.1               9.99           0  Union\n   5 │ group                         1.0               2.0            0  Union ⋯\n   6 │ physical_punishment  2.49467  0.0      3.0      5.0            0  Union\n   7 │ warmth               3.52433  0.0      4.0      7.0            0  Union\n   8 │ outcome              53.4676  33.3901  53.6426  76.751         0  Union\n                                                                1 column omitted",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Descriptive Statitics</span>"
    ]
  },
  {
    "objectID": "unconditional-multilingual.html",
    "href": "unconditional-multilingual.html",
    "title": "3  Unconditional Model",
    "section": "",
    "text": "3.1 The Equation\n\\[\\text{outcome}_{ij}= \\beta_0 + u_{0j} + e_{ij} \\tag{3.1}\\]\nThe Intraclass Correlation Coefficient (ICC) is given by:\n\\[\\text{ICC} = \\frac{var(u_{0j})}{var(u_{0j}) + var(e_{ij})} \\tag{3.2}\\]",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Unconditional Model</span>"
    ]
  },
  {
    "objectID": "unconditional-multilingual.html#run-models",
    "href": "unconditional-multilingual.html#run-models",
    "title": "3  Unconditional Model",
    "section": "3.2 Run Models",
    "text": "3.2 Run Models\n\nStataRJulia\n\n\n\n\nuse simulated_multilevel_data.dta // use data\n\n\n\nmixed outcome || country: // unconditional model\n  \n\nPerforming EM optimization ...\n\nPerforming gradient-based optimization: \nIteration 0:  Log likelihood = -9856.1548  \nIteration 1:  Log likelihood = -9856.1548  \n\nComputing standard errors ...\n\nMixed-effects ML regression                           Number of obs    = 3,000\nGroup variable: country                               Number of groups =    30\n                                                      Obs per group:\n                                                                   min =   100\n                                                                   avg = 100.0\n                                                                   max =   100\n                                                      Wald chi2(0)     =     .\nLog likelihood = -9856.1548                           Prob &gt; chi2      =     .\n\n------------------------------------------------------------------------------\n     outcome | Coefficient  Std. err.      z    P&gt;|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n       _cons |   53.46757   .3539097   151.08   0.000     52.77392    54.16122\n------------------------------------------------------------------------------\n\n------------------------------------------------------------------------------\n  Random-effects parameters  |   Estimate   Std. err.     [95% conf. interval]\n-----------------------------+------------------------------------------------\ncountry: Identity            |\n                  var(_cons) |   3.348734   .9702594      1.897816    5.908906\n-----------------------------+------------------------------------------------\n               var(Residual) |   40.88284   1.060908       38.8555    43.01597\n------------------------------------------------------------------------------\nLR test vs. linear model: chibar2(01) = 169.64        Prob &gt;= chibar2 = 0.0000\n\n\n\n  \nestat icc // calculate icc\n\nIntraclass correlation\n\n------------------------------------------------------------------------------\n                       Level |        ICC   Std. err.     [95% conf. interval]\n-----------------------------+------------------------------------------------\n                     country |   .0757091   .0203761      .0442419    .1265931\n------------------------------------------------------------------------------\n\n\n\n\n\nlibrary(haven)\n\ndf &lt;- read_dta(\"simulated_multilevel_data.dta\")\n\n\nfit0 &lt;- lmer(outcome ~ (1 | country),\n             data = df)\n\nsummary(fit0)\n\nLinear mixed model fit by REML ['lmerMod']\nFormula: outcome ~ (1 | country)\n   Data: df\n\nREML criterion at convergence: 19712.5\n\nScaled residuals: \n     Min       1Q   Median       3Q      Max \n-2.97650 -0.68006  0.00936  0.67580  3.03510 \n\nRandom effects:\n Groups   Name        Variance Std.Dev.\n country  (Intercept)  3.478   1.865   \n Residual             40.883   6.394   \nNumber of obs: 3000, groups:  country, 30\n\nFixed effects:\n            Estimate Std. Error t value\n(Intercept)    53.47       0.36   148.5\n\n\n\nlibrary(performance)\n\nperformance::icc(fit0) # calculate icc\n\n# Intraclass Correlation Coefficient\n\n    Adjusted ICC: 0.078\n  Unadjusted ICC: 0.078\n\n\n\n\n\nusing Tables, MixedModels, MixedModelsExtras, StatFiles, DataFrames, CategoricalArrays, DataFramesMeta\n\ndf = DataFrame(load(\"simulated_multilevel_data.dta\"))\n\n\n@transform!(df, :country = categorical(:country))\n\n\n\nm0 = fit(MixedModel, @formula(outcome ~ (1 | country)), df)\n\nLinear mixed model fit by maximum likelihood\n outcome ~ 1 + (1 | country)\n   logLik   -2 logLik     AIC       AICc        BIC    \n -9856.1548 19712.3097 19718.3097 19718.3177 19736.3288\n\nVariance components:\n            Column   Variance Std.Dev.\ncountry  (Intercept)   3.34871 1.82995\nResidual              40.88285 6.39397\n Number of obs: 3000; levels of grouping factors: 30\n\n  Fixed-effects parameters:\n──────────────────────────────────────────────────\n               Coef.  Std. Error       z  Pr(&gt;|z|)\n──────────────────────────────────────────────────\n(Intercept)  53.4676    0.353908  151.08    &lt;1e-99\n──────────────────────────────────────────────────\n\n\n\n\nicc(m0)\n\n0.07570852291396266",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Unconditional Model</span>"
    ]
  },
  {
    "objectID": "cross-sectional-multilingual.html",
    "href": "cross-sectional-multilingual.html",
    "title": "4  Cross Sectional Model",
    "section": "",
    "text": "4.1 The Equation",
    "crumbs": [
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>Cross Sectional Model</span>"
    ]
  },
  {
    "objectID": "cross-sectional-multilingual.html#the-equation-1",
    "href": "cross-sectional-multilingual.html#the-equation-1",
    "title": "4  Cross Sectional Model",
    "section": "4.2 The Equation",
    "text": "4.2 The Equation\n\\[\\text{outcome}_{ij}= \\beta_0 + \\beta_1 \\text{warmth}_{ij} + \\beta_2 \\text{physical punishment}_{ij} + \\\\ \\beta_3 \\text{group}_{ij} + \\beta_4 \\text{HDI}_{ij} + \\\\ u_{0j} + u_{1j} \\times \\text{warmth}_{ij} + e_{ij} \\tag{4.1}\\]\n\nStataRJulia\n\n\n\n4.2.1 Get The Data\n\n\nuse simulated_multilevel_data.dta\n\n\n\n4.2.2 Graph\n\ntwoway scatter outcome warmth, xtitle(\"warmth\") ytitle(\"outcome\") title(\"Outcome by Parental Warmth\") \n\nquietly graph export scatter.png, replace\n\n\n\n\n\n\n\nFigure 4.1: Outcome by Parental Warmth (Stata)\n\n\n\n\n\n4.2.3 Run The Model\n\n\nmixed outcome warmth physical_punishment group HDI || country: warmth\n\nPerforming EM optimization ...\n\nPerforming gradient-based optimization: \nIteration 0:  Log likelihood =  -9668.198  \nIteration 1:  Log likelihood = -9667.9551  \nIteration 2:  Log likelihood = -9667.9534  \nIteration 3:  Log likelihood = -9667.9533  \nIteration 4:  Log likelihood = -9667.9532  \n\nComputing standard errors ...\n\nMixed-effects ML regression                          Number of obs    =  3,000\nGroup variable: country                              Number of groups =     30\n                                                     Obs per group:\n                                                                  min =    100\n                                                                  avg =  100.0\n                                                                  max =    100\n                                                     Wald chi2(4)     = 401.26\nLog likelihood = -9667.9532                          Prob &gt; chi2      = 0.0000\n\n-------------------------------------------------------------------------------------\n            outcome | Coefficient  Std. err.      z    P&gt;|z|     [95% conf. interval]\n--------------------+----------------------------------------------------------------\n             warmth |   .9616447   .0581825    16.53   0.000     .8476091     1.07568\nphysical_punishment |  -.8453802   .0798155   -10.59   0.000    -1.001816   -.6889448\n              group |   1.084344   .2200539     4.93   0.000     .6530461    1.515642\n                HDI |    .010557   .0204522     0.52   0.606    -.0295286    .0506426\n              _cons |   49.87963   1.436612    34.72   0.000     47.06392    52.69534\n-------------------------------------------------------------------------------------\n\n------------------------------------------------------------------------------\n  Random-effects parameters  |   Estimate   Std. err.     [95% conf. interval]\n-----------------------------+------------------------------------------------\ncountry: Independent         |\n                 var(warmth) |   1.83e-06   .0000173      1.76e-14    190.9774\n                  var(_cons) |   3.370262   .9633726      1.924651    5.901676\n-----------------------------+------------------------------------------------\n               var(Residual) |   36.01906   .9346936      34.23291    37.89842\n------------------------------------------------------------------------------\nLR test vs. linear model: chi2(2) = 198.01                Prob &gt; chi2 = 0.0000\n\nNote: LR test is conservative and provided only for reference.\n\n\n\n\n\n\n4.2.4 Get The Data\n\nlibrary(haven)\n\ndf &lt;- read_dta(\"simulated_multilevel_data.dta\")\n\n\n\n4.2.5 Graph\n\nlibrary(ggplot2)\n\nggplot(df,\n       aes(x = warmth,\n           y = outcome)) +\n  geom_point() +\n  labs(title = \"Outcome by Parental Warmth\")\n\n\n\n\n\n\n\nFigure 4.2: Outcome by Parental Warmth (R)\n\n\n\n\n\n\n\n4.2.6 Run The Model\n\nfit1 &lt;- lmer(outcome ~ warmth + physical_punishment + \n               group + HDI +\n               (1 + warmth || country),\n             data = df)\n\nsummary(fit1)\n\nLinear mixed model fit by REML ['lmerMod']\nFormula: outcome ~ warmth + physical_punishment + group + HDI + ((1 |  \n    country) + (0 + warmth | country))\n   Data: df\n\nREML criterion at convergence: 19350.3\n\nScaled residuals: \n    Min      1Q  Median      3Q     Max \n-3.4496 -0.6807  0.0016  0.6864  3.1792 \n\nRandom effects:\n Groups    Name        Variance  Std.Dev.\n country   (Intercept)  3.611568 1.90041 \n country.1 warmth       0.001876 0.04331 \n Residual              36.049124 6.00409 \nNumber of obs: 3000, groups:  country, 30\n\nFixed effects:\n                    Estimate Std. Error t value\n(Intercept)         49.88754    1.48203  33.662\nwarmth               0.96155    0.05875  16.367\nphysical_punishment -0.84556    0.07986 -10.588\ngroup                1.08471    0.22017   4.927\nHDI                  0.01044    0.02116   0.493\n\nCorrelation of Fixed Effects:\n            (Intr) warmth physc_ group \nwarmth      -0.126                     \nphyscl_pnsh -0.135 -0.025              \ngroup       -0.218 -0.010 -0.019       \nHDI         -0.925 -0.006  0.008 -0.001\n\n\n\n\n\n\n4.2.7 Load The Needed Packages And Load The Data\n\nusing Tables, MixedModels, StatFiles, DataFrames, CategoricalArrays, DataFramesMeta\n\ndf = DataFrame(load(\"simulated_multilevel_data.dta\"))\n\n\n\n4.2.8 Graph\n\nusing StatsPlots\n\n@df df scatter(:outcome, :warmth, \n               title = \"Outcome by Parental Warmth\",\n               ylabel = \"outcome\",\n               xlabel = \"parental warmth\")\n\n\n\n\n\n\n\nFigure 4.3: Outcome by Parental Warmth (Julia)\n\n\n\n\n\n\n\n4.2.9 Change Country To Categorical\n\n@transform!(df, :country = categorical(:country))\n\n\n\n4.2.10 Run The Model\n\n\nm1 = fit(MixedModel, @formula(outcome ~ warmth + physical_punishment + \n               group + HDI +\n               (1 + warmth | country)), df)\n\nLinear mixed model fit by maximum likelihood\n outcome ~ 1 + warmth + physical_punishment + group + HDI + (1 + warmth | country)\n   logLik   -2 logLik     AIC       AICc        BIC    \n -9667.9392 19335.8783 19353.8783 19353.9385 19407.9357\n\nVariance components:\n            Column    Variance   Std.Dev.   Corr.\ncountry  (Intercept)   3.2369484 1.7991521\n         warmth        0.0001080 0.0103903 +1.00\nResidual              36.0187144 6.0015593\n Number of obs: 3000; levels of grouping factors: 30\n\n  Fixed-effects parameters:\n─────────────────────────────────────────────────────────────\n                          Coef.  Std. Error       z  Pr(&gt;|z|)\n─────────────────────────────────────────────────────────────\n(Intercept)          49.9018      1.43435     34.79    &lt;1e-99\nwarmth                0.961545    0.0582135   16.52    &lt;1e-60\nphysical_punishment  -0.845389    0.0798149  -10.59    &lt;1e-25\ngroup                 1.08524     0.220055     4.93    &lt;1e-06\nHDI                   0.0101984   0.0204401    0.50    0.6178\n─────────────────────────────────────────────────────────────\n\n\n\n\n\n\n\n\n\nFigure 4.1: Outcome by Parental Warmth (Stata)\nFigure 4.2: Outcome by Parental Warmth (R)\nFigure 4.3: Outcome by Parental Warmth (Julia)",
    "crumbs": [
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>Cross Sectional Model</span>"
    ]
  },
  {
    "objectID": "cross-classified-multilingual.html",
    "href": "cross-classified-multilingual.html",
    "title": "5  Cross-Classified Models in Stata, R and Julia",
    "section": "",
    "text": "5.1 Introduction\nA two level multilevel model imagines that Level 1 units are nested in Level 2 units. A three level multilevel model imagines that Level 1 units are nested in Level 2 units, which are in turn nested in Level 3.\nA cross-classified model imagines that the nesting is not hierarchical, but rather that there are two sets of clusters or nestings in which individuals may be nested.\nIn this data, events are nested inside persons which are in turn nested in countries, since in this data, individuals never change countries. However, the use of a cross-classified framework would allow for a situation in which persons moved from country to country, and experienced different events in different countries.\nBelow, I describe the use of Stata, R, and Julia to estimate cross-classified models. Because this document is built by Quarto, I describe calling these programs from within a Quarto environment. However, each piece of software could be used individually and separately.",
    "crumbs": [
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>Cross-Classified Models in Stata, R and Julia</span>"
    ]
  },
  {
    "objectID": "cross-classified-multilingual.html#the-data",
    "href": "cross-classified-multilingual.html#the-data",
    "title": "5  Cross-Classified Models in Stata, R and Julia",
    "section": "5.2 The Data",
    "text": "5.2 The Data\nThe examples below use the simulated_multilevel_longitudinal_data.dta file from Multilevel Thinking. Here is a direct link to download the data.\n\n\n\n\nTable 5.1: Sample of Simulated Multilevel Longitudinal Data\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\ncountry\nHDI\nfamily\nid\ngroup\nt\nphysical_punishment\nwarmth\noutcome\n\n\n\n\n1\n69\n1\n1.1\n2\n1\n2\n3\n59.18\n\n\n1\n69\n1\n1.1\n2\n2\n2\n2\n58.29\n\n\n1\n69\n1\n1.1\n2\n3\n3\n3\n60.58\n\n\n1\n69\n2\n1.2\n2\n1\n4\n0\n61.54\n\n\n1\n69\n2\n1.2\n2\n2\n4\n0\n55.96\n\n\n1\n69\n2\n1.2\n2\n3\n4\n2\n56.19",
    "crumbs": [
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>Cross-Classified Models in Stata, R and Julia</span>"
    ]
  },
  {
    "objectID": "cross-classified-multilingual.html#the-equation",
    "href": "cross-classified-multilingual.html#the-equation",
    "title": "5  Cross-Classified Models in Stata, R and Julia",
    "section": "5.3 The Equation",
    "text": "5.3 The Equation\n\\[\\text{outcome}_{ijt}= \\beta_0 + \\beta_1 t_{ijt} + \\beta_2 \\text{warmth}_{ijt} + \\beta_3 \\text{physical punishment}_{ijt} + \\\\ \\beta_4 \\text{group}_{ijt} + \\beta_5 \\text{HDI}_{ijt} + \\\\ u_{0j} + v_{0i} + e_{ijt} \\tag{5.1}\\]",
    "crumbs": [
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>Cross-Classified Models in Stata, R and Julia</span>"
    ]
  },
  {
    "objectID": "cross-classified-multilingual.html#setup",
    "href": "cross-classified-multilingual.html#setup",
    "title": "5  Cross-Classified Models in Stata, R and Julia",
    "section": "5.4 Setup",
    "text": "5.4 Setup\n\nStataRJulia\n\n\nI need to use the library Statamarkdown to call Stata, or I could run Stata on its own\n\nlibrary(Statamarkdown)\n\n\n\nIn R, I use the library lme4 to run multilevel models.\n\nlibrary(lme4)\n\n\n\nI need to call Julia from R.\n\nlibrary(JuliaCall)\n\njulia_setup(JULIA_HOME = \"/Applications/Julia-1.8.app/Contents/Resources/julia/bin\")",
    "crumbs": [
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>Cross-Classified Models in Stata, R and Julia</span>"
    ]
  },
  {
    "objectID": "cross-classified-multilingual.html#get-data-run-models",
    "href": "cross-classified-multilingual.html#get-data-run-models",
    "title": "5  Cross-Classified Models in Stata, R and Julia",
    "section": "5.5 Get Data & Run Models",
    "text": "5.5 Get Data & Run Models\nTo explain statistical syntax for each software, I consider the more general case of a cross-classified model with dependent variable y, independent variables x and z, clustering variables country and id.\n\\[y = \\beta_0 + \\beta_1 x_{ijt} + \\beta_2 z_{ijt} + u_{0j} + v_{0i} + e_{ijt} \\tag{5.2}\\]\n\nStataRJulia\n\n\nIn Stata mixed, the syntax for a multilevel model of the form described in Equation 5.2 is:\nmixed y x || _all: R.group1 || group2:\n\n5.5.0.1 Get The Data\n\n\n\n\n\n\nTip For Running Stata From Quarto\n\n\n\n\n\nBecause I am running Stata from inside a Quarto document, and running Stata in multiple chunks, I need to use the collectcode=TRUE option in the first Stata chunk. i.e. my Quarto chunk needs to begin with ```{stata, collectcode=TRUE}\nSee Doug Hemken’s excellent documentation on Statamarkdown here.\n\n\n\n\n\nuse simulated_multilevel_longitudinal_data.dta\n\n\n\n5.5.0.2 Run The Model\n\n\nmixed outcome t warmth physical_punishment group HDI || _all: R.country || id:\n\nPerforming EM optimization ...\n\nPerforming gradient-based optimization: \nIteration 0:  Log likelihood = -28534.027  \nIteration 1:  Log likelihood = -28533.997  \nIteration 2:  Log likelihood = -28533.997  \n\nComputing standard errors ...\n\nMixed-effects ML regression                            Number of obs =   9,000\n\n        Grouping information\n        -------------------------------------------------------------\n                        |     No. of       Observations per group\n         Group variable |     groups    Minimum    Average    Maximum\n        ----------------+--------------------------------------------\n                   _all |          1      9,000    9,000.0      9,000\n                     id |      3,000          3        3.0          3\n        -------------------------------------------------------------\n\n                                                       Wald chi2(5)  = 1206.21\nLog likelihood = -28533.997                            Prob &gt; chi2   =  0.0000\n\n-------------------------------------------------------------------------------------\n            outcome | Coefficient  Std. err.      z    P&gt;|z|     [95% conf. interval]\n--------------------+----------------------------------------------------------------\n                  t |   .9879647   .0658315    15.01   0.000     .8589373    1.116992\n             warmth |   .9462548   .0381869    24.78   0.000     .8714098      1.0211\nphysical_punishment |  -.9267739   .0499549   -18.55   0.000    -1.024684    -.828864\n              group |    .985819   .1534866     6.42   0.000     .6849908    1.286647\n                HDI |   .0075436   .0207106     0.36   0.716    -.0330485    .0481356\n              _cons |   49.49447   1.424253    34.75   0.000     46.70299    52.28596\n-------------------------------------------------------------------------------------\n\n------------------------------------------------------------------------------\n  Random-effects parameters  |   Estimate   Std. err.     [95% conf. interval]\n-----------------------------+------------------------------------------------\n_all: Identity               |\n              var(R.country) |   3.650496   .9878413      2.147893    6.204274\n-----------------------------+------------------------------------------------\nid: Identity                 |\n                  var(_cons) |   8.852634   .4815279      7.957424    9.848556\n-----------------------------+------------------------------------------------\n               var(Residual) |   26.00093   .4747632      25.08686     26.9483\n------------------------------------------------------------------------------\nLR test vs. linear model: chi2(2) = 1328.22               Prob &gt; chi2 = 0.0000\n\nNote: LR test is conservative and provided only for reference.\n\n\n\n\n\nIn R lme4, the general syntax for a multilevel model of the form described in Equation 5.2 is:\nlmer(y ~ x + z + (1 | group1) + (1 | group2), data = ...)\n\n5.5.0.3 Get The Data\n\nlibrary(haven)\n\ndf &lt;- read_dta(\"simulated_multilevel_longitudinal_data.dta\")\n\n\n\n5.5.0.4 Run The Model\n\nfit1 &lt;- lmer(outcome ~ t + warmth + physical_punishment + \n               group + HDI +\n               (1 | id) +\n               (1 | country),\n             data = df)\n\nsummary(fit1)\n\nLinear mixed model fit by REML ['lmerMod']\nFormula: outcome ~ t + warmth + physical_punishment + group + HDI + (1 |  \n    id) + (1 | country)\n   Data: df\n\nREML criterion at convergence: 57088.4\n\nScaled residuals: \n    Min      1Q  Median      3Q     Max \n-3.4471 -0.6226  0.0081  0.6153  3.1993 \n\nRandom effects:\n Groups   Name        Variance Std.Dev.\n id       (Intercept)  8.864   2.977   \n country  (Intercept)  3.924   1.981   \n Residual             26.008   5.100   \nNumber of obs: 9000, groups:  id, 3000; country, 30\n\nFixed effects:\n                     Estimate Std. Error t value\n(Intercept)         49.494782   1.471780  33.629\nt                    0.987964   0.065840  15.005\nwarmth               0.946259   0.038200  24.771\nphysical_punishment -0.926880   0.049970 -18.549\ngroup                0.985786   0.153550   6.420\nHDI                  0.007543   0.021437   0.352\n\nCorrelation of Fixed Effects:\n            (Intr) t      warmth physc_ group \nt           -0.090                            \nwarmth      -0.085  0.008                     \nphyscl_pnsh -0.085  0.003 -0.019              \ngroup       -0.154  0.000 -0.013 -0.008       \nHDI         -0.943  0.000 -0.003  0.003  0.000\n\n\n\n\n\nIn Julia MixedModels, the general syntax for a multilevel model of the form described in Equation 5.2 is:\nfit(MixedModel, @formula(y ~ x + z + (1 | group1) + (1 | group2)), data)\n\n5.5.0.5 Load The Needed Packages And Load The Data\n\nusing Tables, MixedModels, StatFiles, DataFrames, CategoricalArrays, DataFramesMeta\n\ndf = DataFrame(load(\"simulated_multilevel_longitudinal_data.dta\"))\n\n\n\n5.5.0.6 Change Country To Categorical\n\n@transform!(df, :country = categorical(:country))\n\n\n\n5.5.0.7 Run The Model\n\n\nm1 = fit(MixedModel, @formula(outcome ~ t + warmth + physical_punishment + \n                                group + HDI +\n                                (1 | id) +\n                                (1 | country)), df)\n\nLinear mixed model fit by maximum likelihood\n outcome ~ 1 + t + warmth + physical_punishment + group + HDI + (1 | id) + (1 | country)\n    logLik   -2 logLik      AIC         AICc        BIC     \n -28533.9968  57067.9935  57085.9935  57086.0136  57149.9384\n\nVariance components:\n            Column   Variance Std.Dev.\nid       (Intercept)   8.85264 2.97534\ncountry  (Intercept)   3.65030 1.91058\nResidual              26.00093 5.09911\n Number of obs: 9000; levels of grouping factors: 3000, 30\n\n  Fixed-effects parameters:\n──────────────────────────────────────────────────────────────\n                           Coef.  Std. Error       z  Pr(&gt;|z|)\n──────────────────────────────────────────────────────────────\n(Intercept)          49.4945       1.42422     34.75    &lt;1e-99\nt                     0.987965     0.0658315   15.01    &lt;1e-50\nwarmth                0.946255     0.0381869   24.78    &lt;1e-99\nphysical_punishment  -0.926774     0.0499549  -18.55    &lt;1e-76\ngroup                 0.985819     0.153487     6.42    &lt;1e-09\nHDI                   0.00754357   0.0207101    0.36    0.7157\n──────────────────────────────────────────────────────────────",
    "crumbs": [
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>Cross-Classified Models in Stata, R and Julia</span>"
    ]
  }
]