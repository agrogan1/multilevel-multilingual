{
  "hash": "15b8fe1faf3f7fefbed873547dae2cbf",
  "result": {
    "engine": "knitr",
    "markdown": "# Unconditional Model\n\nAn *unconditional* multilevel model is a model with no independent variables. One should always run an unconditional model as the first step of a multilevel model in order to get a sense of the way that variation is apportioned in the model across the different levels.\n\n## The Equation\n\n$$\\text{outcome}_{ij}= \\beta_0 + u_{0j} + e_{ij}$$ {#eq-MLMunconditional}\n\nThe Intraclass Correlation Coefficient (ICC) is given by:\n\n$$\\text{ICC} = \\frac{var(u_{0j})}{var(u_{0j}) + var(e_{ij})}$$ {#eq-ICCunconditional}\n\nIn a two level multilevel model, the ICC provides a measure of the amount of variation attributable to Level 2.\n\n\n\n::: {.cell}\n\n:::\n\n\n\n## Run Models\n\n::: {.panel-tabset group=\"language\"}\n\n### Stata\n\n\n\n::: {.cell collectcode='true'}\n\n```{.stata .cell-code}\n\nuse simulated_multilevel_data.dta // use data\n\n```\n:::\n\n::: {.cell collectcode='true'}\n\n```{.stata .cell-code}\n\nmixed outcome || country: // unconditional model\n  \n```\n\n\n::: {.cell-output .cell-output-stdout}\n\n```\nPerforming EM optimization ...\n\nPerforming gradient-based optimization: \nIteration 0:  Log likelihood = -9856.1548  \nIteration 1:  Log likelihood = -9856.1548  \n\nComputing standard errors ...\n\nMixed-effects ML regression                           Number of obs    = 3,000\nGroup variable: country                               Number of groups =    30\n                                                      Obs per group:\n                                                                   min =   100\n                                                                   avg = 100.0\n                                                                   max =   100\n                                                      Wald chi2(0)     =     .\nLog likelihood = -9856.1548                           Prob > chi2      =     .\n\n------------------------------------------------------------------------------\n     outcome | Coefficient  Std. err.      z    P>|z|     [95% conf. interval]\n-------------+----------------------------------------------------------------\n       _cons |   53.46757   .3539097   151.08   0.000     52.77392    54.16122\n------------------------------------------------------------------------------\n\n------------------------------------------------------------------------------\n  Random-effects parameters  |   Estimate   Std. err.     [95% conf. interval]\n-----------------------------+------------------------------------------------\ncountry: Identity            |\n                  var(_cons) |   3.348734   .9702594      1.897816    5.908906\n-----------------------------+------------------------------------------------\n               var(Residual) |   40.88284   1.060908       38.8555    43.01597\n------------------------------------------------------------------------------\nLR test vs. linear model: chibar2(01) = 169.64        Prob >= chibar2 = 0.0000\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.stata .cell-code}\n  \nestat icc // ICC\n\n```\n\n\n::: {.cell-output .cell-output-stdout}\n\n```\nIntraclass correlation\n\n------------------------------------------------------------------------------\n                       Level |        ICC   Std. err.     [95% conf. interval]\n-----------------------------+------------------------------------------------\n                     country |   .0757091   .0203761      .0442419    .1265931\n------------------------------------------------------------------------------\n```\n\n\n:::\n:::\n\n\n\n### R\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(haven)\n\ndf <- read_dta(\"simulated_multilevel_data.dta\")\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(lme4) # estimate multilevel models\n\nfit0 <- lmer(outcome ~ (1 | country),\n             data = df) # unconditional model\n\nsummary(fit0)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nLinear mixed model fit by REML ['lmerMod']\nFormula: outcome ~ (1 | country)\n   Data: df\n\nREML criterion at convergence: 19712.5\n\nScaled residuals: \n     Min       1Q   Median       3Q      Max \n-2.97650 -0.68006  0.00936  0.67580  3.03510 \n\nRandom effects:\n Groups   Name        Variance Std.Dev.\n country  (Intercept)  3.478   1.865   \n Residual             40.883   6.394   \nNumber of obs: 3000, groups:  country, 30\n\nFixed effects:\n            Estimate Std. Error t value\n(Intercept)    53.47       0.36   148.5\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(performance)\n\nperformance::icc(fit0) # ICC\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# Intraclass Correlation Coefficient\n\n    Adjusted ICC: 0.078\n  Unadjusted ICC: 0.078\n```\n\n\n:::\n:::\n\n\n\n### Julia\n\n\n\n::: {.cell}\n\n```{.julia .cell-code}\nusing Tables, MixedModels, MixedModelsExtras, \nStatFiles, DataFrames, CategoricalArrays, DataFramesMeta\n\ndf = DataFrame(load(\"simulated_multilevel_data.dta\"))\n```\n:::\n\n::: {.cell}\n\n```{.julia .cell-code}\n@transform!(df, :country = categorical(:country))\n```\n:::\n\n::: {.cell}\n\n```{.julia .cell-code}\n\nm0 = fit(MixedModel, \n         @formula(outcome ~ (1 | country)), df) # unconditional model\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nLinear mixed model fit by maximum likelihood\n outcome ~ 1 + (1 | country)\n   logLik   -2 logLik     AIC       AICc        BIC    \n -9856.1548 19712.3097 19718.3097 19718.3177 19736.3288\n\nVariance components:\n            Column   Variance Std.Dev.\ncountry  (Intercept)   3.34871 1.82995\nResidual              40.88285 6.39397\n Number of obs: 3000; levels of grouping factors: 30\n\n  Fixed-effects parameters:\n──────────────────────────────────────────────────\n               Coef.  Std. Error       z  Pr(>|z|)\n──────────────────────────────────────────────────\n(Intercept)  53.4676    0.353908  151.08    <1e-99\n──────────────────────────────────────────────────\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.julia .cell-code}\n\nicc(m0) # ICC\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n0.07570852291396266\n```\n\n\n:::\n:::\n\n\n\n:::\n",
    "supporting": [
      "unconditional-multilingual_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {
      "knitr": [
        "{\"type\":\"list\",\"attributes\":{},\"value\":[]}"
      ]
    },
    "preserve": null,
    "postProcess": false
  }
}